<div>
	<textarea id="encodetext"></textarea>
	<button onclick="encode(document.getElementById('encodetext').value)">Encode!</button>
	<br>
	<input type="checkbox" oninput="options.encode = 0 + !this.checked" checked><a>Encode?</a>
	<br>
	<ul>
		<li><input type="checkbox" oninput="options.Pepper = this.checked"><a>Pepper</a></li>
		<li><input type="checkbox" oninput="options.Apple = this.checked"><a>Apple</a></li>
	</ul>
</div>
<div>
	<pre id="result">result goes here</pre>
</div>
<script>
	const ingredients = {Pepper: function(target, isDecoding) {
		let index = -1 + isDecoding, charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", charset2 = charset.repeat(2)
		return target.replace(/[a-z]/gi, function(item) {
			index++
			return charset2.at(charset.indexOf(item) + ((index * 6 % 12) - 3))
		})
	}, Apple: function(target, isDecoding) {
		const func = isDecoding == 0 ? function(match) {
			return match.slice(1) + match[0]
		} : function(match) {
			return match.slice(0, -1) + match[match.length - 1]
		}
		return target.replace(/\w+/g, func)
	}}
	const options = {Pepper: false, Apple: false, encode: 0}
	function encode(text) {
		let result = text
		const cache = Object.keys(options)
		for (const key of cache) {
			if (key === "encode") {} else if (options[key]) {
				result = ingredients[key](result, options.encode)
			}
		}
		document.getElementById("result").textContent = result
	}
</script>
